<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookVault: Suggest a book</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
  <%- include("header.ejs") %>  
    
  <div class="container">
    <h1 id="recommendations" class="text-center">Suggest a Book</h1>
    <h5 class="text-center">Have a recommendation? Share it below!</h5>

    <div class="hero-image2">
     <img src="/images/animatedgirl2.png" alt="Girl reading book" class="img-fluid rounded">
    </div>

    <form id="request-form" action="/suggestions" method="POST">
        <div class="mb-3">
          <label for="title" class="form-label">Book Title</label>
          <input type="text" class="form-control" id="title" name="title" required>
        </div>
    
        <div class="mb-3">
          <label for="author" class="form-label">Author</label>
          <input type="text" class="form-control" id="author" name="author" required>
        </div>
    
        <div class="mb-3">
          <label for="reason" class="form-label">Why do you recommend this book?</label>
          <textarea class="form-control" id="reason" name="reason" rows="3" required></textarea>
        </div>
    
        <div class="mb-3">
          <label for="isbn" class="form-label">ISBN (optional)</label>
          <input type="text" class="form-control" id="isbn" name="isbn">
        </div>
    
        <div class="text-center mt-4 mb-5">
          <button type="submit" id="suggestion-btn" class="btn btn-dark px-4 py-2">Submit Recommendation <img src="/images/bookvaulticon.png" alt="BookVault Icon" width="35" height="30" class="me-2"></button>
        </div>
        
      </form>
    
      <% if (suggestion) { %>
        <div class="mt-5 text-center">
          <h4>Successfully Submitted Your Recommendation:</h4>
          <p><strong><%= suggestion.title %></strong> by <%= suggestion.author %></p>
          <p><%= suggestion.reason %></p>
    
          <% if (suggestion.isbn) { %>
            <img 
              src="https://covers.openlibrary.org/b/isbn/<%= suggestion.isbn %>-L.jpg" 
              alt="Cover for <%= suggestion.title %>" 
              class="img-fluid mt-3" 
              style="max-width: 200px;"
              onerror="this.onerror=null; this.src='/images/fallbackcover.png';"
            >
          <% } %>
        </div>
      <% } %>
</div>

<%- include("footer.ejs") %>
<script src="script.js"></script>
</body>
</html>